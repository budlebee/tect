_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var r=n("J4zp"),c=n("284h");t.__esModule=!0,t.default=void 0;var o,a=c(n("q1tI")),s=n("elyg"),i=n("nOHt"),u=new Map,l=window.IntersectionObserver,d={};var f=function(e,t){var n=o||(l?o=new l((function(e){e.forEach((function(e){if(u.has(e.target)){var t=u.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(o.unobserve(e.target),u.delete(e.target),t())}}))}),{rootMargin:"200px"}):void 0);return n?(n.observe(e),u.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}u.delete(e)}):function(){}};function p(e,t,n,r){(0,s.isLocalURL)(t)&&(e.prefetch(t,n,r).catch((function(e){0})),d[t+"%"+n]=!0)}var j=function(e){var t=!1!==e.prefetch,n=a.default.useState(),c=r(n,2),o=c[0],u=c[1],j=(0,i.useRouter)(),b=j&&j.pathname||"/",m=a.default.useMemo((function(){var t=(0,s.resolveHref)(b,e.href,!0),n=r(t,2),c=n[0],o=n[1];return{href:c,as:e.as?(0,s.resolveHref)(b,e.as):o||c}}),[b,e.href,e.as]),h=m.href,O=m.as;a.default.useEffect((function(){if(t&&l&&o&&o.tagName&&(0,s.isLocalURL)(h)&&!d[h+"%"+O])return f(o,(function(){p(j,h,O)}))}),[t,o,h,O,j]);var x=e.children,v=e.replace,g=e.shallow,w=e.scroll;"string"===typeof x&&(x=a.default.createElement("a",null,x));var y=a.Children.only(x),T={ref:function(e){e&&u(e),y&&"object"===typeof y&&y.ref&&("function"===typeof y.ref?y.ref(e):"object"===typeof y.ref&&(y.ref.current=e))},onClick:function(e){y.props&&"function"===typeof y.props.onClick&&y.props.onClick(e),e.defaultPrevented||function(e,t,n,r,c,o,a){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,s.isLocalURL)(n))&&(e.preventDefault(),null==a&&(a=r.indexOf("#")<0),t[c?"replace":"push"](n,r,{shallow:o}).then((function(e){e&&a&&(window.scrollTo(0,0),document.body.focus())})))}(e,j,h,O,v,g,w)}};return t&&(T.onMouseEnter=function(e){(0,s.isLocalURL)(h)&&(y.props&&"function"===typeof y.props.onMouseEnter&&y.props.onMouseEnter(e),p(j,h,O,{priority:!0}))}),(e.passHref||"a"===y.type&&!("href"in y.props))&&(T.href=(0,s.addBasePath)((0,s.addLocale)(O,j&&j.locale,j&&j.defaultLocale))),a.default.cloneElement(y,T)};t.default=j},ggRg:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return _}));var r=n("o0o1"),c=n.n(r),o=n("rePB"),a=n("HaE+"),s=n("ODXe"),i=n("nKUr"),u=n("q1tI"),l=n.n(u),d=(n("YFqc"),n("a6RD")),f=n.n(d),p=(n("nOHt"),n("fR0J")),j=(n("Tb2b"),n("wFql")),b=n("bx4M"),m=n("5rEg"),h=n("jq9l"),O=n("KQm4"),x=n("Jgta"),v=n("Vl3Y"),g=n("2/Rp"),w=m.a.TextArea,y=function(e){var t=Object(u.useState)(""),n=t[0],r=t[1],o=Object(u.useState)(!1),s=o[0];o[1];function l(){return(l=Object(a.a)(c.a.mark((function t(){var r,o,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,p.a.collection("questions").doc(e.questionID);case 5:return r=t.sent,new Date,o=x.a.firestore.Timestamp.fromDate(new Date),a={content:n,createdAt:o,author:{nickname:"\uc784\uc2dc\ub85c \uace0\uc815\ub41c \ub2c9\ub124\uc784",uid:"\uc784\uc2dc user uid"}},t.next=11,r.update({comments:[].concat(Object(O.a)(e.comments),[a])});case 11:t.sent,window.location.href="/questions/".concat(e.questionID),t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(2),alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),t.abrupt("return");case 19:case"end":return t.stop()}}),t,null,[[2,15]])})))).apply(this,arguments)}return Object(i.jsx)(h.a,{content:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(v.a.Item,{children:Object(i.jsx)(w,{rows:3,onChange:function(e){e.preventDefault(),r(e.target.value)},placeholder:"Write a comment... (maximum 500 letters)",value:n,spellCheck:!1,maxLength:500})},"Formitem_1"),Object(i.jsx)(v.a.Item,{children:Object(i.jsx)(g.a,{id:"addCommentBtn",loading:s,onClick:function(){return l.apply(this,arguments)},type:"default",children:"\ub313\uae00 \uc791\uc131"},"submitCommentButton")},"Formitem_2")]})})},T=l.a.memo(y);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=j.a.Title,E=b.a.Meta,q=(m.a.TextArea,function(e){if(!e)return 0;for(var t=0,n=0,r=Object.entries(e);n<r.length;n++){var c=Object(s.a)(r[n],2);c[0],c[1];t+=1}return t}),P=function(e){var t=(new Date).getTimezoneOffset(),n=new Date(1e3*e-60*t*1e3),r=n.toISOString().split("T")[0],c=n.toISOString().split("T")[1].split(".")[0];return"".concat(r," ").concat(c)},_=!0;t.default=function(e){var t=Object(u.useState)(),r=t[0],o=t[1],s=Object(u.useState)(!1),l=s[0],d=s[1],j=Object(u.useState)(!1),m=j[0],O=j[1],x=Object(u.useState)({title:"",content:"",subject:"",createdAt:{seconds:""},authorNickname:"",authorTempPassword:"",authorUID:"",answers:[],comments:[],lastUpdate:{seconds:""}}),v=x[0],g=x[1],w=Object(u.useState)(1),y=w[0],D=w[1],_=f()((function(){return Promise.all([n.e(6),n.e(12),n.e(10),n.e(8),n.e(0),n.e(18)]).then(n.bind(null,"D9k+"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["D9k+"]},modules:["../../components/ToastViewer"]}}),I=f()((function(){return Promise.all([n.e(6),n.e(12),n.e(10),n.e(8),n.e(0),n.e(38)]).then(n.bind(null,"dLPS"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["dLPS"]},modules:["../../components/AnswerToastEditor"]}}),L=f()((function(){return Promise.all([n.e(6),n.e(12),n.e(10),n.e(8),n.e(0),n.e(39)]).then(n.bind(null,"szST"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["szST"]},modules:["../../components/QuestionEditToastEditor"]}});return Object(u.useEffect)(Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.collection("questions").doc(e.questionID).get().then((function(e){var t=JSON.parse(JSON.stringify(e.data())),n=S({id:e.id},t);g(n),D(n.answers.length)}));case 2:case"end":return t.stop()}}),t)}))),[]),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"mainContainer",children:[Object(i.jsxs)(b.a,{style:{marginTop:16},actions:[Object(i.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub2f5\ubcc0 ",q(v.answers),"\uac1c, \ub313\uae00"," ",q(v.comments),"\uac1c"]})],title:"Q. ".concat(v.title),children:[Object(i.jsx)(E,{avatar:Object(i.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),title:v.authorNickname,description:Object(i.jsxs)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:[Object(i.jsxs)("div",{children:["created at ",P(v.createdAt.seconds)]}),v.lastUpdate?Object(i.jsxs)("div",{children:["updated at ",P(v.lastUpdate.seconds)]}):""]})}),m?Object(i.jsx)(L,{question:v,questionID:e.questionID}):Object(i.jsx)(_,{initialValue:v.content}),l||m||0!=y?"":Object(i.jsx)("div",{children:Object(i.jsx)("button",{onClick:function(){d(!0)},children:"edit your question?"})}),l&&!m?Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{placeholder:"\uc791\uc131\uc2dc \uc785\ub825\ud55c \ube44\ubc00\ubc88\ud638",onChange:function(e){o(e.target.value)}}),Object(i.jsx)("button",{onClick:function(){r==v.authorTempPassword?O(!0):alert("\ube44\ubc00\ubc88\ud638\uac00 \ub2e4\ub985\ub2c8\ub2e4.")},children:"\uae00 \uc218\uc815\ud558\uae30"})]}):""]}),v.comments&&v.comments.map((function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(h.a,{style:{marginLeft:"15px"},author:e.author.nickname,content:Object(i.jsx)("div",{style:{whiteSpace:"pre"},children:e.content}),datetime:P(e.createdAt.seconds)})},e.id)})),Object(i.jsx)(T,{questionID:e.questionID,comments:v.comments}),Object(i.jsxs)("div",{children:[Object(i.jsx)("br",{}),Object(i.jsxs)(k,{level:2,style:{marginTop:"10px",marginLeft:"15px"},children:[q(v.answers)," Answers"]}),v.answers&&v.answers.map((function(e){return Object(i.jsx)("div",{children:Object(i.jsxs)(b.a,{style:{marginTop:16},actions:[Object(i.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub313\uae00 ",q(e.comment),"\uac1c"]})],title:e.title,children:[Object(i.jsx)(E,{avatar:Object(i.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),description:Object(i.jsx)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:P(e.createdAt.seconds)})}),Object(i.jsx)(_,{initialValue:e.content})]})},e.id)}))]}),Object(i.jsxs)("div",{className:"answerBlock",children:[Object(i.jsx)(k,{level:2,style:{marginTop:"50px",marginLeft:"15px"},children:"Add Answer"}),Object(i.jsx)(I,{questionID:e.questionID,answers:v.answers})]})]})})}},xZwj:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/questions/[id]",function(){return n("ggRg")}])}},[["xZwj",2,1,4,3,5,7,9,11,13,14,15,16,20,0]]]);