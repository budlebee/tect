_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{"J/CK":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/[id]",function(){return n("dB9g")}])},dB9g:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return S}));var a=n("ODXe"),c=n("nKUr"),r=n("q1tI"),i=n.n(r),s=n("a6RD"),o=n.n(s),l=(n("Tb2b"),n("wFql")),d=n("bx4M"),u=n("5rEg"),m=n("jq9l"),j=n("o0o1"),p=n.n(j),b=n("KQm4"),f=n("HaE+"),x=n("Jgta"),O=n("fR0J"),h=n("Vl3Y"),w=n("2/Rp"),g=u.a.TextArea,v=function(e){var t=Object(r.useState)(""),n=t[0],a=t[1],i=Object(r.useState)(!1),s=i[0];i[1];function o(){return(o=Object(f.a)(p.a.mark((function t(){var a,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,O.a.collection("articles").doc(e.articleID);case 4:return a=t.sent,c=x.a.firestore.Timestamp.fromDate(new Date),r={content:n,createdAt:c,authorNickname:"\uc784\uc2dc\ub85c \uace0\uc815\ub41c \ub2c9\ub124\uc784",authorUID:"\uc784\uc2dc user uid"},t.next=9,a.update({comments:[].concat(Object(b.a)(e.comments),[r])});case 9:t.sent,window.location.href="/articles/".concat(e.articleID);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.jsx)(m.a,{content:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(h.a.Item,{children:Object(c.jsx)(g,{rows:3,onChange:function(e){e.preventDefault(),a(e.target.value)},placeholder:"Write a comment... (maximum 500 letters)",value:n,spellCheck:!1,maxLength:500})},"Formitem_1"),Object(c.jsx)(h.a.Item,{children:Object(c.jsx)(w.a,{id:"addCommentBtn",loading:s,onClick:function(){return o.apply(this,arguments)},type:"default",children:"\ub313\uae00 \uc791\uc131"},"submitCommentButton")},"Formitem_2")]})})},_=i.a.memo(v),D=(l.a.Title,d.a.Meta),T=(u.a.TextArea,o()((function(){return Promise.all([n.e(3),n.e(13),n.e(10),n.e(12),n.e(0),n.e(18)]).then(n.bind(null,"D9k+"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["D9k+"]},modules:["../../components/ToastViewer"]}})),k=function(e){if(!e)return 0;for(var t=0,n=0,c=Object.entries(e);n<c.length;n++){var r=Object(a.a)(c[n],2);r[0],r[1];t+=1}return t},I=function(e){var t=(new Date).getTimezoneOffset(),n=new Date(1e3*e-60*t*1e3),a=n.toISOString().split("T")[0],c=n.toISOString().split("T")[1].split(".")[0];return"".concat(a," ").concat(c)},S=!0;t.default=function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"mainContainer",children:[Object(c.jsxs)(d.a,{style:{marginTop:16},actions:[Object(c.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub313\uae00 ",k(e.article.comments),"\uac1c"]})],title:"".concat(e.article.title),children:[Object(c.jsx)(D,{avatar:Object(c.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),description:Object(c.jsxs)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:[Object(c.jsxs)("div",{children:["created at ",I(e.article.createdAt.seconds)]}),e.article.lastUpdate?Object(c.jsxs)("div",{children:["updated at ",I(e.article.lastUpdate.seconds)]}):""]})}),Object(c.jsx)(T,{initialValue:e.article.content})]}),e.article.comments&&e.article.comments.map((function(e){return Object(c.jsx)("div",{children:Object(c.jsx)(m.a,{style:{marginLeft:"15px"},content:Object(c.jsx)("div",{style:{whiteSpace:"pre"},children:e.content}),datetime:I(e.createdAt.seconds)})},e.id)})),Object(c.jsx)(_,{articleID:e.articleID,comments:e.article.comments})]})})}}},[["J/CK",2,1,7,4,8,5,6,11,14,15,16,17,20,0]]]);