_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var r=n("J4zp"),o=n("284h");t.__esModule=!0,t.default=void 0;var s,i=o(n("q1tI")),a=n("elyg"),c=n("nOHt"),u=new Map,l=window.IntersectionObserver,d={};var f=function(e,t){var n=s||(l?s=new l((function(e){e.forEach((function(e){if(u.has(e.target)){var t=u.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(s.unobserve(e.target),u.delete(e.target),t())}}))}),{rootMargin:"200px"}):void 0);return n?(n.observe(e),u.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}u.delete(e)}):function(){}};function p(e,t,n,r){(0,a.isLocalURL)(t)&&(e.prefetch(t,n,r).catch((function(e){0})),d[t+"%"+n]=!0)}var j=function(e){var t=!1!==e.prefetch,n=i.default.useState(),o=r(n,2),s=o[0],u=o[1],j=(0,c.useRouter)(),m=j&&j.pathname||"/",b=i.default.useMemo((function(){var t=(0,a.resolveHref)(m,e.href,!0),n=r(t,2),o=n[0],s=n[1];return{href:o,as:e.as?(0,a.resolveHref)(m,e.as):s||o}}),[m,e.href,e.as]),h=b.href,x=b.as;i.default.useEffect((function(){if(t&&l&&s&&s.tagName&&(0,a.isLocalURL)(h)&&!d[h+"%"+x])return f(s,(function(){p(j,h,x)}))}),[t,s,h,x,j]);var O=e.children,v=e.replace,g=e.shallow,w=e.scroll;"string"===typeof O&&(O=i.default.createElement("a",null,O));var q=i.Children.only(O),y={ref:function(e){e&&u(e),q&&"object"===typeof q&&q.ref&&("function"===typeof q.ref?q.ref(e):"object"===typeof q.ref&&(q.ref.current=e))},onClick:function(e){q.props&&"function"===typeof q.props.onClick&&q.props.onClick(e),e.defaultPrevented||function(e,t,n,r,o,s,i){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,a.isLocalURL)(n))&&(e.preventDefault(),null==i&&(i=r.indexOf("#")<0),t[o?"replace":"push"](n,r,{shallow:s}).then((function(e){e&&i&&(window.scrollTo(0,0),document.body.focus())})))}(e,j,h,x,v,g,w)}};return t&&(y.onMouseEnter=function(e){(0,a.isLocalURL)(h)&&(q.props&&"function"===typeof q.props.onMouseEnter&&q.props.onMouseEnter(e),p(j,h,x,{priority:!0}))}),(e.passHref||"a"===q.type&&!("href"in q.props))&&(y.href=(0,a.addBasePath)((0,a.addLocale)(x,j&&j.locale,j&&j.defaultLocale))),i.default.cloneElement(q,y)};t.default=j},ggRg:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return S}));var r=n("ODXe"),o=n("nKUr"),s=n("q1tI"),i=n.n(s),a=(n("YFqc"),n("a6RD")),c=n.n(a),u=(n("Tb2b"),n("wFql")),l=n("bx4M"),d=n("5rEg"),f=n("jq9l"),p=n("o0o1"),j=n.n(p),m=n("KQm4"),b=n("HaE+"),h=n("Jgta"),x=n("fR0J"),O=n("Vl3Y"),v=n("2/Rp"),g=d.a.TextArea,w=function(e){var t=Object(s.useState)(""),n=t[0],r=t[1],i=Object(s.useState)(!1),a=i[0];i[1];function c(){return(c=Object(b.a)(j.a.mark((function t(){var r,o,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,x.a.collection("questions").doc(e.questionID);case 4:return r=t.sent,new Date,o=h.a.firestore.Timestamp.fromDate(new Date),s={content:n,createdAt:o,author:{nickname:"\uc784\uc2dc\ub85c \uace0\uc815\ub41c \ub2c9\ub124\uc784",uid:"\uc784\uc2dc user uid"}},t.next=10,r.update({comments:[].concat(Object(m.a)(e.comments),[s])});case 10:t.sent,window.location.href="/questions/".concat(e.questionID);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(o.jsx)(f.a,{content:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(O.a.Item,{children:Object(o.jsx)(g,{rows:3,onChange:function(e){e.preventDefault(),r(e.target.value)},placeholder:"Write a comment... (maximum 500 letters)",value:n,spellCheck:!1,maxLength:500})},"Formitem_1"),Object(o.jsx)(O.a.Item,{children:Object(o.jsx)(v.a,{id:"addCommentBtn",loading:a,onClick:function(){return c.apply(this,arguments)},type:"default",children:"\ub313\uae00 \uc791\uc131"},"submitCommentButton")},"Formitem_2")]})})},q=i.a.memo(w),y=u.a.Title,T=l.a.Meta,k=(d.a.TextArea,function(e){if(!e)return 0;for(var t=0,n=0,o=Object.entries(e);n<o.length;n++){var s=Object(r.a)(o[n],2);s[0],s[1];t+=1}return t}),E=function(e){var t=(new Date).getTimezoneOffset(),n=new Date(1e3*e-60*t*1e3),r=n.toISOString().split("T")[0],o=n.toISOString().split("T")[1].split(".")[0];return"".concat(r," ").concat(o)},S=!0;t.default=function(e){var t=Object(s.useState)(),r=t[0],i=t[1],a=Object(s.useState)(!1),u=a[0],d=a[1],p=Object(s.useState)(!1),j=p[0],m=p[1],b=Object(s.useState)(e.question.answers.length),h=b[0],x=(b[1],c()((function(){return Promise.all([n.e(3),n.e(13),n.e(10),n.e(12),n.e(0),n.e(18)]).then(n.bind(null,"D9k+"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["D9k+"]},modules:["../../components/ToastViewer"]}})),O=c()((function(){return Promise.all([n.e(3),n.e(13),n.e(10),n.e(12),n.e(0),n.e(40)]).then(n.bind(null,"dLPS"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["dLPS"]},modules:["../../components/AnswerToastEditor"]}}),v=c()((function(){return Promise.all([n.e(3),n.e(13),n.e(10),n.e(12),n.e(0),n.e(39)]).then(n.bind(null,"szST"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["szST"]},modules:["../../components/QuestionEditToastEditor"]}});return Object(s.useEffect)((function(){}),[]),Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"mainContainer",children:[Object(o.jsxs)(l.a,{style:{marginTop:16},actions:[Object(o.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub2f5\ubcc0 ",k(e.question.answers),"\uac1c, \ub313\uae00"," ",k(e.question.comments),"\uac1c"]})],title:"Q. ".concat(e.question.title),children:[Object(o.jsx)(T,{avatar:Object(o.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),title:e.question.authorNickname,description:Object(o.jsxs)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:[Object(o.jsxs)("div",{children:["created at ",E(e.question.createdAt.seconds)]}),e.question.lastUpdate?Object(o.jsxs)("div",{children:["updated at ",E(e.question.lastUpdate.seconds)]}):""]})}),j?Object(o.jsx)(v,{question:e.question,questionID:e.questionID}):Object(o.jsx)(x,{initialValue:e.question.content}),u||j||0!=h?"":Object(o.jsx)("div",{children:Object(o.jsx)("button",{onClick:function(){d(!0)},children:"edit your question?"})}),u&&!j?Object(o.jsxs)("div",{children:[Object(o.jsx)("input",{placeholder:"\uc791\uc131\uc2dc \uc785\ub825\ud55c \ube44\ubc00\ubc88\ud638",onChange:function(e){i(e.target.value)}}),Object(o.jsx)("button",{onClick:function(){r==e.question.authorTempPassword?m(!0):alert("\ube44\ubc00\ubc88\ud638\uac00 \ub2e4\ub985\ub2c8\ub2e4.")},children:"\uae00 \uc218\uc815\ud558\uae30"})]}):""]}),e.question.comments&&e.question.comments.map((function(e){return Object(o.jsx)("div",{children:Object(o.jsx)(f.a,{style:{marginLeft:"15px"},author:e.author.nickname,content:Object(o.jsx)("div",{style:{whiteSpace:"pre"},children:e.content}),datetime:E(e.createdAt.seconds)})},e.id)})),Object(o.jsx)(q,{questionID:e.questionID,comments:e.question.comments}),Object(o.jsxs)("div",{children:[Object(o.jsx)("br",{}),Object(o.jsxs)(y,{level:2,style:{marginTop:"10px",marginLeft:"15px"},children:[k(e.question.answers)," Answers"]}),e.question.answers&&e.question.answers.map((function(e){return Object(o.jsx)("div",{children:Object(o.jsxs)(l.a,{style:{marginTop:16},actions:[Object(o.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub313\uae00 ",k(e.comment),"\uac1c"]})],title:e.title,children:[Object(o.jsx)(T,{avatar:Object(o.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),description:Object(o.jsx)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:E(e.createdAt.seconds)})}),Object(o.jsx)(x,{initialValue:e.content})]})},e.id)}))]}),Object(o.jsxs)("div",{className:"answerBlock",children:[Object(o.jsx)(y,{level:2,style:{marginTop:"50px",marginLeft:"15px"},children:"Add Answer"}),Object(o.jsx)(O,{questionID:e.questionID,answers:e.question.answers})]})]})})}},xZwj:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/questions/[id]",function(){return n("ggRg")}])}},[["xZwj",2,1,7,4,8,5,6,9,11,14,15,16,17,20,0]]]);