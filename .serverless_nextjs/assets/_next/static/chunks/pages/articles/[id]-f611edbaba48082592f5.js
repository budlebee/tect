_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{"J/CK":function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/[id]",function(){return n("dB9g")}])},Qetd:function(t,e,n){"use strict";var r=Object.assign.bind(Object);t.exports=r,t.exports.default=t.exports},SksO:function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},W8MJ:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},WkPL:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},ZhPi:function(t,e,n){var r=n("WkPL");t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},cDf5:function(t,e){function n(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},dB9g:function(t,e,n){"use strict";n.r(e),n.d(e,"__N_SSP",(function(){return E}));var r=n("o0o1"),c=n.n(r),o=n("rePB"),a=n("HaE+"),i=n("ODXe"),s=n("nKUr"),u=n("q1tI"),l=n.n(u),p=n("a6RD"),f=n.n(p),d=n("fR0J"),b=(n("Tb2b"),n("wFql")),m=n("bx4M"),j=n("5rEg"),O=n("jq9l"),x=n("KQm4"),y=n("Jgta"),h=n("Vl3Y"),g=n("2/Rp"),v=j.a.TextArea,w=function(t){var e=Object(u.useState)(""),n=e[0],r=e[1],o=Object(u.useState)(!1),i=o[0];o[1];function l(){return(l=Object(a.a)(c.a.mark((function e(){var r,o,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.a.collection("articles").doc(t.articleID);case 4:return r=e.sent,o=y.a.firestore.Timestamp.fromDate(new Date),a={content:n,createdAt:o,authorNickname:"\uc784\uc2dc\ub85c \uace0\uc815\ub41c \ub2c9\ub124\uc784",authorUID:"\uc784\uc2dc user uid"},e.next=9,r.update({comments:[].concat(Object(x.a)(t.comments),[a])});case 9:e.sent,window.location.href="/articles/".concat(t.articleID);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.jsx)(O.a,{content:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(h.a.Item,{children:Object(s.jsx)(v,{rows:3,onChange:function(t){t.preventDefault(),r(t.target.value)},placeholder:"Write a comment... (maximum 500 letters)",value:n,spellCheck:!1,maxLength:500})},"Formitem_1"),Object(s.jsx)(h.a.Item,{children:Object(s.jsx)(g.a,{id:"addCommentBtn",loading:i,onClick:function(){return l.apply(this,arguments)},type:"default",children:"\ub313\uae00 \uc791\uc131"},"submitCommentButton")},"Formitem_2")]})})},S=l.a.memo(w);function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}b.a.Title;var k=m.a.Meta,P=(j.a.TextArea,f()((function(){return Promise.all([n.e(6),n.e(13),n.e(10),n.e(12),n.e(0),n.e(17)]).then(n.bind(null,"D9k+"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["D9k+"]},modules:["../../components/ToastViewer"]}})),T=function(t){if(!t)return 0;for(var e=0,n=0,r=Object.entries(t);n<r.length;n++){var c=Object(i.a)(r[n],2);c[0],c[1];e+=1}return e},I=function(t){var e=(new Date).getTimezoneOffset(),n=new Date(1e3*t-60*e*1e3),r=n.toISOString().split("T")[0],c=n.toISOString().split("T")[1].split(".")[0];return"".concat(r," ").concat(c)},E=!0;e.default=function(t){var e=Object(u.useState)({title:"",content:"",subject:"",createdAt:{seconds:""},authorNickname:"",authorUID:"",comments:[],lastUpdate:{seconds:""}}),n=e[0],r=e[1];return Object(u.useEffect)(Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.collection("articles").doc(t.articleID).get().then((function(t){var e=JSON.parse(JSON.stringify(t.data()));r(_({id:t.id},e))}));case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log("error: ",e.t0),e.abrupt("return",{props:{}});case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"mainContainer",children:[Object(s.jsxs)(m.a,{style:{marginTop:16},actions:[Object(s.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub313\uae00 ",T(n.comments),"\uac1c"]})],title:"".concat(n.title),children:[Object(s.jsx)(k,{avatar:Object(s.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),description:Object(s.jsxs)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:[Object(s.jsxs)("div",{children:["created at ",I(n.createdAt.seconds)]}),n.lastUpdate?Object(s.jsxs)("div",{children:["updated at ",I(n.lastUpdate.seconds)]}):""]})}),""!=n.content?Object(s.jsx)(P,{initialValue:n.content}):""]}),n.comments&&n.comments.map((function(t){return Object(s.jsx)("div",{children:Object(s.jsx)(O.a,{style:{marginLeft:"15px"},content:Object(s.jsx)("div",{style:{whiteSpace:"pre"},children:t.content}),datetime:I(t.createdAt.seconds)})},t.id)})),Object(s.jsx)(S,{articleID:t.articleID,comments:n.comments})]})})}},lwsE:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}},[["J/CK",2,1,4,3,5,7,9,11,14,15,16,20,0]]]);