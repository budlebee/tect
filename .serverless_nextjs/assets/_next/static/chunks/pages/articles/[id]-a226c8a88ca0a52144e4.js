_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{"J/CK":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/[id]",function(){return n("dB9g")}])},dB9g:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return N}));var r=n("o0o1"),c=n.n(r),a=n("rePB"),o=n("HaE+"),i=n("ODXe"),s=n("nKUr"),l=n("q1tI"),u=n.n(l),d=n("a6RD"),p=n.n(d),j=n("fR0J"),m=(n("Tb2b"),n("wFql")),b=n("bx4M"),f=n("5rEg"),O=n("jq9l"),h=n("KQm4"),x=n("Jgta"),g=n("Vl3Y"),w=n("2/Rp"),v=f.a.TextArea,y=function(e){var t=Object(l.useState)(""),n=t[0],r=t[1],a=Object(l.useState)(!1),i=a[0];a[1];function u(){return(u=Object(o.a)(c.a.mark((function t(){var r,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,j.a.collection("articles").doc(e.articleID);case 4:return r=t.sent,a=x.a.firestore.Timestamp.fromDate(new Date),o={content:n,createdAt:a,authorNickname:"\uc784\uc2dc\ub85c \uace0\uc815\ub41c \ub2c9\ub124\uc784",authorUID:"\uc784\uc2dc user uid"},t.next=9,r.update({comments:[].concat(Object(h.a)(e.comments),[o])});case 9:t.sent,window.location.href="/articles/".concat(e.articleID);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.jsx)(O.a,{content:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a.Item,{children:Object(s.jsx)(v,{rows:3,onChange:function(e){e.preventDefault(),r(e.target.value)},placeholder:"Write a comment... (maximum 500 letters)",value:n,spellCheck:!1,maxLength:500})},"Formitem_1"),Object(s.jsx)(g.a.Item,{children:Object(s.jsx)(w.a,{id:"addCommentBtn",loading:i,onClick:function(){return u.apply(this,arguments)},type:"default",children:"\ub313\uae00 \uc791\uc131"},"submitCommentButton")},"Formitem_2")]})})},D=u.a.memo(y);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}m.a.Title;var k=b.a.Meta,P=(f.a.TextArea,p()((function(){return Promise.all([n.e(6),n.e(12),n.e(10),n.e(8),n.e(0),n.e(18)]).then(n.bind(null,"D9k+"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["D9k+"]},modules:["../../components/ToastViewer"]}})),T=function(e){if(!e)return 0;for(var t=0,n=0,r=Object.entries(e);n<r.length;n++){var c=Object(i.a)(r[n],2);c[0],c[1];t+=1}return t},I=function(e){var t=(new Date).getTimezoneOffset(),n=new Date(1e3*e-60*t*1e3),r=n.toISOString().split("T")[0],c=n.toISOString().split("T")[1].split(".")[0];return"".concat(r," ").concat(c)},N=!0;t.default=function(e){var t=Object(l.useState)({title:"",content:"",subject:"",createdAt:{seconds:""},authorNickname:"",authorUID:"",comments:[],lastUpdate:{seconds:""}}),n=t[0],r=t[1];return Object(l.useEffect)(Object(o.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.collection("articles").doc(e.articleID).get().then((function(e){var t=JSON.parse(JSON.stringify(e.data()));r(S({id:e.id},t))}));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.log("error: ",t.t0),t.abrupt("return",{props:{}});case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))),[]),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"mainContainer",children:[Object(s.jsxs)(b.a,{style:{marginTop:16},actions:[Object(s.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub313\uae00 ",T(n.comments),"\uac1c"]})],title:"".concat(n.title),children:[Object(s.jsx)(k,{avatar:Object(s.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),description:Object(s.jsxs)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:[Object(s.jsxs)("div",{children:["created at ",I(n.createdAt.seconds)]}),n.lastUpdate?Object(s.jsxs)("div",{children:["updated at ",I(n.lastUpdate.seconds)]}):""]})}),""!=n.content?Object(s.jsx)(P,{initialValue:n.content}):""]}),n.comments&&n.comments.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(O.a,{style:{marginLeft:"15px"},content:Object(s.jsx)("div",{style:{whiteSpace:"pre"},children:e.content}),datetime:I(e.createdAt.seconds)})},e.id)})),Object(s.jsx)(D,{articleID:e.articleID,comments:n.comments})]})})}}},[["J/CK",2,1,4,3,5,7,9,11,14,15,16,20,0]]]);