_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[26],{"J/CK":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/[id]",function(){return n("dB9g")}])},dB9g:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return N}));var r=n("o0o1"),c=n.n(r),a=n("rePB"),s=n("HaE+"),i=n("ODXe"),o=n("nKUr"),l=n("q1tI"),u=n.n(l),d=n("a6RD"),j=n.n(d),p=n("fR0J"),b=(n("Tb2b"),n("wFql")),m=n("bx4M"),O=n("5rEg"),f=n("jq9l"),h=n("KQm4"),x=n("Jgta"),g=n("Vl3Y"),v=n("2/Rp"),w=O.a.TextArea,y=function(e){var t=Object(l.useState)(""),n=t[0],r=t[1],a=Object(l.useState)(!1),i=a[0],u=(a[1],Object(l.useState)(Math.floor(5*Math.random()))),d=u[0],j=(u[1],Object(l.useState)()),b=j[0],m=j[1];function y(){return(y=Object(s.a)(c.a.mark((function t(){var r,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(b==d+5){t.next=5;break}return alert("\uc790\ub3d9\uc785\ub825 \ubc29\uc9c0 \uc22b\uc790\ub97c \ub2e4\uc2dc \uc785\ub825\ud574 \uc8fc\uc138\uc694."),t.abrupt("return");case 5:return t.next=7,p.a.collection("articles").doc(e.articleID);case 7:return r=t.sent,a=x.a.firestore.Timestamp.fromDate(new Date),s={content:n,createdAt:a,authorNickname:"\uc784\uc2dc \ub2c9\ub124\uc784",authorUID:"\uc784\uc2dc user uid"},t.next=12,r.update({comments:[].concat(Object(h.a)(e.comments),[s])});case 12:t.sent,window.location.href="/articles/".concat(e.articleID);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(o.jsx)(f.a,{content:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(g.a.Item,{children:Object(o.jsx)(w,{rows:3,onChange:function(e){e.preventDefault(),r(e.target.value)},placeholder:"Write a comment... (maximum 500 letters)",value:n,spellCheck:!1,maxLength:500})},"Formitem_1"),Object(o.jsxs)(g.a.Item,{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("img",{src:"/images/dice-five.png",width:"30px",height:"30px"})," +",d," = ?"]}),Object(o.jsx)("br",{}),Object(o.jsx)(O.a,{value:b,placeholder:"Answer...",size:"small",onChange:function(e){e.preventDefault(),m(e.target.value)}})]},"Formitem_2"),Object(o.jsx)(g.a.Item,{children:Object(o.jsx)(v.a,{id:"addCommentBtn",loading:i,onClick:function(){return y.apply(this,arguments)},type:"default",children:"\ub313\uae00 \uc791\uc131"},"submitCommentButton")},"Formitem_3")]})})},D=u.a.memo(y);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}b.a.Title;var k=m.a.Meta,I=(O.a.TextArea,j()((function(){return Promise.all([n.e(3),n.e(10),n.e(8),n.e(14),n.e(0),n.e(18)]).then(n.bind(null,"D9k+"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["D9k+"]},modules:["../../components/ToastViewer"]}})),P=function(e){if(!e)return 0;for(var t=0,n=0,r=Object.entries(e);n<r.length;n++){var c=Object(i.a)(r[n],2);c[0],c[1];t+=1}return t},T=function(e){var t=(new Date).getTimezoneOffset(),n=new Date(1e3*e-60*t*1e3),r=n.toISOString().split("T")[0],c=n.toISOString().split("T")[1].split(".")[0];return"".concat(r," ").concat(c)},N=!0;t.default=function(e){var t=Object(l.useState)({title:"",content:"",subject:"",createdAt:{seconds:""},authorNickname:"",authorUID:"",comments:[],lastUpdate:{seconds:""}}),n=t[0],r=t[1];return Object(l.useEffect)(Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.collection("articles").doc(e.articleID).get().then((function(e){var t=JSON.parse(JSON.stringify(e.data()));r(S({id:e.id},t))}));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.log("error: ",t.t0),t.abrupt("return",{props:{}});case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))),[]),Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"mainContainer",children:[Object(o.jsxs)(m.a,{style:{marginTop:16},actions:[Object(o.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub313\uae00 ",P(n.comments),"\uac1c"]})],title:"".concat(n.title),children:[Object(o.jsx)(k,{avatar:Object(o.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),description:Object(o.jsxs)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:[Object(o.jsxs)("div",{children:["created at ",T(n.createdAt.seconds)]}),n.lastUpdate?Object(o.jsxs)("div",{children:["updated at ",T(n.lastUpdate.seconds)]}):""]})}),""!=n.content?Object(o.jsx)(I,{initialValue:n.content}):""]}),n.comments&&n.comments.map((function(e){return Object(o.jsx)("div",{children:Object(o.jsx)(f.a,{style:{marginLeft:"15px"},content:Object(o.jsx)("div",{style:{whiteSpace:"pre"},children:e.content}),datetime:T(e.createdAt.seconds)})},e.id)})),Object(o.jsx)(D,{articleID:e.articleID,comments:n.comments})]})})}}},[["J/CK",2,1,6,4,7,5,9,11,12,15,16,19,0]]]);