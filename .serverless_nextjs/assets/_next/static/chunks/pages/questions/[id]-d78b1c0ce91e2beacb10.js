_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[30],{YFqc:function(e,t,n){e.exports=n("cTJO")},cTJO:function(e,t,n){"use strict";var r=n("J4zp"),a=n("284h");t.__esModule=!0,t.default=void 0;var c,s=a(n("q1tI")),o=n("elyg"),i=n("nOHt"),u=new Map,l=window.IntersectionObserver,d={};var f=function(e,t){var n=c||(l?c=new l((function(e){e.forEach((function(e){if(u.has(e.target)){var t=u.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(c.unobserve(e.target),u.delete(e.target),t())}}))}),{rootMargin:"200px"}):void 0);return n?(n.observe(e),u.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}u.delete(e)}):function(){}};function p(e,t,n,r){(0,o.isLocalURL)(t)&&(e.prefetch(t,n,r).catch((function(e){0})),d[t+"%"+n]=!0)}var j=function(e){var t=!1!==e.prefetch,n=s.default.useState(),a=r(n,2),c=a[0],u=a[1],j=(0,i.useRouter)(),b=j&&j.pathname||"/",m=s.default.useMemo((function(){var t=(0,o.resolveHref)(b,e.href,!0),n=r(t,2),a=n[0],c=n[1];return{href:a,as:e.as?(0,o.resolveHref)(b,e.as):c||a}}),[b,e.href,e.as]),h=m.href,O=m.as;s.default.useEffect((function(){if(t&&l&&c&&c.tagName&&(0,o.isLocalURL)(h)&&!d[h+"%"+O])return f(c,(function(){p(j,h,O)}))}),[t,c,h,O,j]);var x=e.children,v=e.replace,g=e.shallow,w=e.scroll;"string"===typeof x&&(x=s.default.createElement("a",null,x));var y=s.Children.only(x),T={ref:function(e){e&&u(e),y&&"object"===typeof y&&y.ref&&("function"===typeof y.ref?y.ref(e):"object"===typeof y.ref&&(y.ref.current=e))},onClick:function(e){y.props&&"function"===typeof y.props.onClick&&y.props.onClick(e),e.defaultPrevented||function(e,t,n,r,a,c,s){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,o.isLocalURL)(n))&&(e.preventDefault(),null==s&&(s=r.indexOf("#")<0),t[a?"replace":"push"](n,r,{shallow:c}).then((function(e){e&&s&&(window.scrollTo(0,0),document.body.focus())})))}(e,j,h,O,v,g,w)}};return t&&(T.onMouseEnter=function(e){(0,o.isLocalURL)(h)&&(y.props&&"function"===typeof y.props.onMouseEnter&&y.props.onMouseEnter(e),p(j,h,O,{priority:!0}))}),(e.passHref||"a"===y.type&&!("href"in y.props))&&(T.href=(0,o.addBasePath)((0,o.addLocale)(O,j&&j.locale,j&&j.defaultLocale))),s.default.cloneElement(y,T)};t.default=j},ggRg:function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return _}));var r=n("o0o1"),a=n.n(r),c=n("rePB"),s=n("HaE+"),o=n("ODXe"),i=n("nKUr"),u=n("q1tI"),l=n.n(u),d=(n("YFqc"),n("a6RD")),f=n.n(d),p=(n("nOHt"),n("fR0J")),j=(n("Tb2b"),n("wFql")),b=n("bx4M"),m=n("5rEg"),h=n("2/Rp"),O=n("jq9l"),x=n("KQm4"),v=n("Jgta"),g=n("Vl3Y"),w=m.a.TextArea,y=function(e){var t=Object(u.useState)(""),n=t[0],r=t[1],c=Object(u.useState)(!1),o=c[0],l=(c[1],Object(u.useState)()),d=l[0],f=l[1],j=Object(u.useState)(Math.floor(5*Math.random())),b=j[0];j[1];function y(){return(y=Object(s.a)(a.a.mark((function t(){var r,c,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(d==b+5){t.next=5;break}return alert("\uc790\ub3d9\uc785\ub825 \ubc29\uc9c0 \uc22b\uc790\ub97c \ub2e4\uc2dc \uc785\ub825\ud574 \uc8fc\uc138\uc694."),t.abrupt("return");case 5:return t.prev=5,t.next=8,p.a.collection("questions").doc(e.questionID);case 8:return r=t.sent,new Date,c=v.a.firestore.Timestamp.fromDate(new Date),s={content:n,createdAt:c,author:{nickname:"\uc784\uc2dc \ub2c9\ub124\uc784",uid:"\uc784\uc2dc user uid"}},t.next=14,r.update({comments:[].concat(Object(x.a)(e.comments),[s])});case 14:t.sent,window.location.href="/questions/".concat(e.questionID),t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(5),alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),t.abrupt("return");case 22:case"end":return t.stop()}}),t,null,[[5,18]])})))).apply(this,arguments)}return Object(i.jsx)(O.a,{content:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(g.a.Item,{children:Object(i.jsx)(w,{rows:3,onChange:function(e){e.preventDefault(),r(e.target.value)},placeholder:"Write a comment... (maximum 500 letters)",value:n,spellCheck:!1,maxLength:500})},"Formitem_1"),Object(i.jsx)(g.a.Item,{children:Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("img",{src:"/images/dice-five.png",width:"30px",height:"30px"})," +",b," = ?"]}),Object(i.jsx)(m.a,{value:d,placeholder:"Answer...",onChange:function(e){e.preventDefault(),f(e.target.value)},style:{width:100}})]})},"Formitem_2"),Object(i.jsx)(g.a.Item,{children:Object(i.jsx)(h.a,{id:"addCommentBtn",loading:o,onClick:function(){return y.apply(this,arguments)},type:"default",children:"\ub313\uae00 \uc791\uc131"},"submitCommentButton")},"Formitem_3")]})})},T=l.a.memo(y);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=j.a.Title,E=b.a.Meta,q=(m.a.TextArea,function(e){if(!e)return 0;for(var t=0,n=0,r=Object.entries(e);n<r.length;n++){var a=Object(o.a)(r[n],2);a[0],a[1];t+=1}return t}),P=function(e){var t=(new Date).getTimezoneOffset(),n=new Date(1e3*e-60*t*1e3),r=n.toISOString().split("T")[0],a=n.toISOString().split("T")[1].split(".")[0];return"".concat(r," ").concat(a)},_=!0;t.default=function(e){var t=Object(u.useState)(),r=t[0],c=t[1],o=Object(u.useState)(!1),l=o[0],d=o[1],j=Object(u.useState)(!1),x=j[0],v=j[1],g=Object(u.useState)({title:"",content:"",subject:"",createdAt:{seconds:""},authorNickname:"",authorTempPassword:"",authorUID:"",answers:[],comments:[],lastUpdate:{seconds:""}}),w=g[0],y=g[1],S=Object(u.useState)(1),_=S[0],I=S[1],L=f()((function(){return Promise.all([n.e(3),n.e(10),n.e(8),n.e(14),n.e(0),n.e(18)]).then(n.bind(null,"D9k+"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["D9k+"]},modules:["../../components/ToastViewer"]}}),C=f()((function(){return Promise.all([n.e(3),n.e(10),n.e(8),n.e(14),n.e(0),n.e(38)]).then(n.bind(null,"dLPS"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["dLPS"]},modules:["../../components/AnswerToastEditor"]}}),N=f()((function(){return Promise.all([n.e(3),n.e(10),n.e(8),n.e(14),n.e(0),n.e(39)]).then(n.bind(null,"szST"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["szST"]},modules:["../../components/QuestionEditToastEditor"]}});return Object(u.useEffect)(Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.collection("questions").doc(e.questionID).get().then((function(e){var t=JSON.parse(JSON.stringify(e.data())),n=D({id:e.id},t);y(n),I(n.answers.length)}));case 2:case"end":return t.stop()}}),t)}))),[]),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"mainContainer",children:[Object(i.jsxs)(b.a,{style:{marginTop:16},actions:[Object(i.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub2f5\ubcc0 ",q(w.answers),"\uac1c, \ub313\uae00"," ",q(w.comments),"\uac1c"]})],title:"Q. ".concat(w.title),children:[Object(i.jsx)(E,{avatar:Object(i.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),title:w.authorNickname,description:Object(i.jsxs)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:[Object(i.jsxs)("div",{children:["created at ",P(w.createdAt.seconds)]}),w.lastUpdate?Object(i.jsxs)("div",{children:["updated at ",P(w.lastUpdate.seconds)]}):""]})}),x?Object(i.jsx)(N,{question:w,questionID:e.questionID}):Object(i.jsx)(L,{initialValue:w.content}),l||x||0!=_?"":Object(i.jsx)("div",{children:Object(i.jsx)(h.a,{onClick:function(){d(!0)},children:"edit your question?"})}),l&&!x?Object(i.jsxs)("div",{children:[Object(i.jsx)(m.a,{placeholder:"\uc791\uc131\uc2dc \uc785\ub825\ud55c \ube44\ubc00\ubc88\ud638",onChange:function(e){c(e.target.value)}}),Object(i.jsx)(h.a,{onClick:function(){r==w.authorTempPassword?v(!0):alert("\ube44\ubc00\ubc88\ud638\uac00 \ub2e4\ub985\ub2c8\ub2e4.")},children:"\uae00 \uc218\uc815\ud558\uae30"})]}):""]}),w.comments&&w.comments.map((function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(O.a,{style:{marginLeft:"15px"},author:e.author.nickname,content:Object(i.jsx)("div",{style:{whiteSpace:"pre"},children:e.content}),datetime:P(e.createdAt.seconds)})},e.id)})),Object(i.jsx)(T,{questionID:e.questionID,comments:w.comments}),Object(i.jsxs)("div",{children:[Object(i.jsx)("br",{}),Object(i.jsxs)(k,{level:2,style:{marginTop:"10px",marginLeft:"15px"},children:[q(w.answers)," Answers"]}),w.answers&&w.answers.map((function(e){return Object(i.jsx)("div",{children:Object(i.jsxs)(b.a,{style:{marginTop:16},actions:[Object(i.jsxs)("div",{style:{float:"left",paddingLeft:"15px"},children:["\ub313\uae00 ",q(e.comment),"\uac1c"]})],title:e.title,children:[Object(i.jsx)(E,{avatar:Object(i.jsx)("span",{style:{fontWeight:"bold",fontSize:"20px"}}),description:Object(i.jsx)("div",{style:{marginBottom:"10px",marginTop:"-5px"},children:P(e.createdAt.seconds)})}),Object(i.jsx)(L,{initialValue:e.content})]})},e.id)}))]}),Object(i.jsxs)("div",{className:"answerBlock",children:[Object(i.jsx)(k,{level:2,style:{marginTop:"50px",marginLeft:"15px"},children:"Add Answer"}),Object(i.jsx)(C,{questionID:e.questionID,answers:w.answers})]})]})})}},xZwj:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/questions/[id]",function(){return n("ggRg")}])}},[["xZwj",2,1,6,4,7,5,9,11,13,12,15,16,19,0]]]);